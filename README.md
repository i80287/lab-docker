# Инструкция по сборке и запуску `Docker` контейнера с `Jupyterhub`:

Установка `Docker`
----------------------
Для сборки контейнера вам понадобится установать `Docker` - ПО, 
предназначенное для работы с технологиями контейнеризации

Если вы используете Windows, вам поможет [эта](https://docs.docker.com/desktop/installwindows-install/) инструкция по установке

Если вы используете Linux, то вам поможет [эта](https://docs.docker.com/engine/install/ubuntu/) инструкция по установке

Копирование файлов
----------------------
Если вы знакомы с системой контроля версий `git` или знакомы с поддерживаемыми ею 
консольными командами, вы можете скачать код репозитория при помощи команды
    
    git clone https://github.com/i80287/lab-docker.git

Также вы можете скачать `zip` архив c файлами проекта в 2 шага, как это показано ниже:
<h1 align="center">
<img src="https://i.ibb.co/jRk35YK/rep-download-instr.png" style="width:500px;height:600px;">
</h1><br>
После скачивания архива его нужно распаковать

Сборка и запуск контейнера
----------------------
> Если вы используете Linux, то написанные далее команды надо вызывать
> либо от имени суперюзера `root`, либо с указанием модификатора права 
> доступа `sudo` перед каждой командой

На этом шаге будет проиcходить сборка и запуск контейнера:

**1.** Перейдите в скачанную папку (директорию)

**2.** Запустите консольную команду 
    
    docker build -t jupyterhub_lab:1.0 .

Так вы соберёте образ контейнера с именем `jupyterhub_lab` и тегом `1.0`

**3.** Запустите консольную команду 

    docker run -d -p 8088:80 --name jupyterhub_lab_container jupyterhub_lab:1.0

Так вы запустите контейнер с именем `jupyterhub_lab_container` в фоновом режиме из созданного
образа `jupyterhub_lab` с тегом `1.0`. Все сигналы с порта `80`, на котором будет поднят сервер
`Jupyterhub` внути контейнера, будут ретранслированы на порт `8088` на хосте (вашем компьютере)

Если вы не хотите запускать контейнер в фоновом режиме, а хотите видеть все логи работы
`Jupyterhub` сервера в консоли, уберите флаг `-d` из команды

**4.** В браузере перейдите по ссылке http://127.0.0.1:8088/
Перед вами откроется окно входа в аккаунт в системе `Jupyterhub`
Введите пару логин-пароль `admin` - `admin`
Для вас будет создан сервер, на который вы сможете загружать свои файлы

**5.** Если вам нужно остановить контейнер, вызовите консольную команду

    docker stop jupyterhub_lab_container

**6.** Если вам нужно запусить контейнер, **не теряя сохранённые файлы**, вызовите консольную команду

    docker start jupyterhub_lab_container

**7.** Если вам нужно посмотреть список всех контейнеров, вызовите консольную команду

    docker ps -a

**8.** Если вам нужно удалить контейнер, вызовите консольную команду

    docker rm jupyterhub_lab_container

Загрузка своих `ноутбуков`
----------------------
Если вы хотите загрузить свои `Jupyter ноутбуки` (файлы `Jupyter Notebook` с расширением `.ipynb`), то это можно сделать несколькими способами:

**1.** Вы можете просто скопировать свои ноутбуки в папку проекта, на одном уровне с `Dockerfile`, тогда, 
при пересборке проекта (шаги 5, 8, 1-4), будет запущен новый `Jupyterhub` сервер, и пользователю `admin` 
будут скопированы все ноутбуки, которые вы переместили в папку проекта

**2.** Если вы хотите указать свой путь до ноутбуков или изменить место их хранения внути файловой системы контейнера 
(внутри контейнера развёрнута своя операционная система, в данном случае - `Ubuntu`, со своей фаловой системой),
то пути можно указать, изменив переменные `NOTEBOOKS_FROM` и `HUB_PATH` в `Dockerfile`. 

Переменная `NOTEBOOKS_FROM` отвечает за расположение файлов в вашей системе (`source`) <br />
Переменная `HUB_PATH` отвечает за расположение файлов в файловой системе контейнера (`destination`) <br />
При указании путей стоит учитывать, что в `Unix` подобных системах, к которым относится и `Ubuntu`, 
(т.к. является дистрибутивом ос `Debian`), файлы в пути разделяются символом `/`, а не `\`, как в `Windows` и `Dos` <br />

- **Документация по Docker:** https://docs.docker.com/
- **Документация по модификатору sudo в Linux:** https://linux.die.net/man/8/sudo
- **Документация по Jupyterhub:** https://jupyterhub.readthedocs.io/en/stable/
